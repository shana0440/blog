{"componentChunkName":"component---src-templates-blog-post-js","path":"/writings/flutter-intrinsicheight/","result":{"data":{"site":{"siteMetadata":{"title":"KWGUO Blog"}},"markdownRemark":{"id":"85d7e8ee-df93-502c-9a0b-34706e3508ed","excerpt":"今天來介紹一下  這個官方說很好用但不要常用的 widget 。 官方介紹：https://api.flutter.dev/flutter/widgets/IntrinsicHeight-class.html 官方的說明是說這個 widget 會讓高度剛好等於 children…","html":"<p>今天來介紹一下 <code class=\"language-text\">IntrinsicHeight</code> 這個官方說很好用但不要常用的 widget 。</p>\n<p>官方介紹：<a href=\"https://api.flutter.dev/flutter/widgets/IntrinsicHeight-class.html\">https://api.flutter.dev/flutter/widgets/IntrinsicHeight-class.html</a></p>\n<p>官方的說明是說這個 widget 會讓高度剛好等於 children 的高度，主要是用在處理在 unlimited height 的情況下，不想要 unlimited height 的時候使用。</p>\n<p>一時之間是很難想到這個 widget 有什麼用處，讓我舉一個例子就非常容易了解了，假設我們有一個 form 要給 user 填寫，並且我們希望 submit button 會黏在畫面的最底部像下圖。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">+----------------------+\n|                      |\n|  User name           |\n|  +----------------+  |\n|  |     Input      |  |\n|  +----------------+  |\n|                      |\n|  Email               |        Column(\n|  +----------------+  |          children: [\n|  |     Input      |  |            TextField(),\n|  +----------------+  |            TextField(),\n|                      |            TextField(),\n|  Password            |            Spacer(),\n|  +----------------+  |            FlatButton(),\n|  |     Input      |  |          ],\n|  +----------------+  |        )\n|                      |\n|                      |\n|  +----------------+  |\n|  |     Submit     |  |\n|  +----------------+  |\n+----------------------+</code></pre></div>\n<p>上面這個畫面，在 iPhone X 上，可以完整地顯示，沒有問題，但是在 iPhone SE 上沒辦法顯示，一個簡單的做法就是在 <code class=\"language-text\">Column</code> 外加上一個 <code class=\"language-text\">SingleChildScrollView</code>, 讓這個 <code class=\"language-text\">Column</code> 變得可以 scroll，問題在於 <code class=\"language-text\">SingleChildScrollView</code> 會讓 <code class=\"language-text\">Column</code> 有無限的高度，這樣 <code class=\"language-text\">Spacer</code> 就不能夠運作了，進而導致 button 沒辦法黏在底部！</p>\n<p>這時候我們就可以使用 <code class=\"language-text\">IntrinsicHeight</code> 了，不過還是需要搭配其他 widget 來做就是了，下面是一個範例 widget tree 跟說明。</p>\n<div class=\"gatsby-highlight\" data-language=\"dart\"><pre class=\"language-dart\"><code class=\"language-dart\"><span class=\"token class-name\">Scaffold</span><span class=\"token punctuation\">(</span>\n  appBar<span class=\"token punctuation\">:</span> <span class=\"token class-name\">AppBar</span><span class=\"token punctuation\">(</span>\n    title<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>widget<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  body<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Padding</span><span class=\"token punctuation\">(</span>\n    padding<span class=\"token punctuation\">:</span> <span class=\"token keyword\">const</span> <span class=\"token class-name\">EdgeInsets</span><span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    child<span class=\"token punctuation\">:</span> <span class=\"token class-name\">LayoutBuilder</span><span class=\"token punctuation\">(</span>\n      <span class=\"token comment\">// 用來取得可以繪製 widget 的範圍</span>\n      builder<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">,</span> constraints<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token class-name\">SingleChildScrollView</span><span class=\"token punctuation\">(</span>\n          child<span class=\"token punctuation\">:</span> <span class=\"token class-name\">ConstrainedBox</span><span class=\"token punctuation\">(</span>\n            <span class=\"token comment\">// 限制 single child scroll view 最小範圍為可繪製範圍的最大範圍</span>\n            <span class=\"token comment\">// 通常就是 parent size 去掉 padding and margin</span>\n            <span class=\"token comment\">// 並讓最大範圍為無限，這樣當內容超過 minHeight 的時候才會變成可以 scroll</span>\n            constraints<span class=\"token punctuation\">:</span> constraints<span class=\"token punctuation\">.</span><span class=\"token function\">copyWith</span><span class=\"token punctuation\">(</span>\n              minHeight<span class=\"token punctuation\">:</span> constraints<span class=\"token punctuation\">.</span>maxHeight<span class=\"token punctuation\">,</span>\n              maxHeight<span class=\"token punctuation\">:</span> double<span class=\"token punctuation\">.</span>infinity<span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token comment\">// IntrinsicHeight 在這邊的作用，就是讓 Spacer 可以正常運作。</span>\n            <span class=\"token comment\">// 上面的 ConstrainedBox 已經強迫讓 IntrinsicHeight 最小會等於可繪製的最大高度</span>\n            <span class=\"token comment\">// 所以當內容小於設定的 minHeight 的話，Spacer 就會佔據多餘的空間</span>\n            <span class=\"token comment\">// 當超過 minHeight 的時候，因為 IntrinsicHeight 會讓 child 的高度剛好為 child's 的高度</span>\n            <span class=\"token comment\">// 所以Spacer 不會佔據任何空間</span>\n            child<span class=\"token punctuation\">:</span> <span class=\"token class-name\">IntrinsicHeight</span><span class=\"token punctuation\">(</span>\n              child<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Column</span><span class=\"token punctuation\">(</span>\n                mainAxisAlignment<span class=\"token punctuation\">:</span> <span class=\"token class-name\">MainAxisAlignment</span><span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">,</span>\n                children<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>\n                  <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token string-literal\"><span class=\"token string\">'You have pushed the button this many times:'</span></span><span class=\"token punctuation\">,</span>\n                    textAlign<span class=\"token punctuation\">:</span> <span class=\"token class-name\">TextAlign</span><span class=\"token punctuation\">.</span>center<span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">SizedBox</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span>\n                    <span class=\"token string-literal\"><span class=\"token string\">'</span><span class=\"token interpolation\"><span class=\"token punctuation\">$</span><span class=\"token expression\">_counter</span></span><span class=\"token string\">'</span></span><span class=\"token punctuation\">,</span>\n                    style<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Theme</span><span class=\"token punctuation\">.</span><span class=\"token function\">of</span><span class=\"token punctuation\">(</span>context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>textTheme<span class=\"token punctuation\">.</span>headline4<span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">SizedBox</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">TextFormField</span><span class=\"token punctuation\">(</span>\n                    decoration<span class=\"token punctuation\">:</span> <span class=\"token class-name\">InputDecoration</span><span class=\"token punctuation\">(</span>\n                      labelText<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">'User name'</span></span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">SizedBox</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">TextFormField</span><span class=\"token punctuation\">(</span>\n                    decoration<span class=\"token punctuation\">:</span> <span class=\"token class-name\">InputDecoration</span><span class=\"token punctuation\">(</span>\n                      labelText<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">'Email'</span></span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">SizedBox</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">TextFormField</span><span class=\"token punctuation\">(</span>\n                    decoration<span class=\"token punctuation\">:</span> <span class=\"token class-name\">InputDecoration</span><span class=\"token punctuation\">(</span>\n                      labelText<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">'Password'</span></span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    obscureText<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">SizedBox</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">TextFormField</span><span class=\"token punctuation\">(</span>\n                    decoration<span class=\"token punctuation\">:</span> <span class=\"token class-name\">InputDecoration</span><span class=\"token punctuation\">(</span>\n                      labelText<span class=\"token punctuation\">:</span> <span class=\"token string-literal\"><span class=\"token string\">'Confirm password'</span></span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    obscureText<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">SizedBox</span><span class=\"token punctuation\">(</span>height<span class=\"token punctuation\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">Spacer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                  <span class=\"token class-name\">FlatButton</span><span class=\"token punctuation\">(</span>\n                    color<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Colors</span><span class=\"token punctuation\">.</span>blueAccent<span class=\"token punctuation\">,</span>\n                    textColor<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Colors</span><span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">,</span>\n                    child<span class=\"token punctuation\">:</span> <span class=\"token class-name\">Text</span><span class=\"token punctuation\">(</span><span class=\"token string-literal\"><span class=\"token string\">'Press Me'</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    onPressed<span class=\"token punctuation\">:</span> _incrementCounter<span class=\"token punctuation\">,</span>\n                  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n              <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n          <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<table>\n<thead>\n<tr>\n<th align=\"left\">iPhone SE</th>\n<th align=\"left\">Note 9</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/bd735ce4e4fe1f448d94dddaa272fa4d/6af66/iphone-se.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.7027027027027%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAYAAACJ8xqgAAAACXBIWXMAAAsTAAALEwEAmpwYAAADP0lEQVRIx6WVvW/TQBjGvbMCAxQBRUJC4kMIMVAkBqgooIbyoQqJIhYGBsQEC+rEwlCJgbQNBQGlRSRpgY0/AJDYWMpARRFUShNaShsn8Z3tO6d50HsXp/lw4zYMP99759eP3/NzdzaOjTGcfM1wfJwhMsmxJ2Zhd8xCe8zCzuGCGu+MM0TecHSMMzVG99qH89j11MW++19xp68f/W9+qL6x57GFvSP64e2Dmm2DBbQN6bhtsIAdQ1qE4m1RDcXbo3lsHhY4MDCDJwNj6Hw4BaM9VsDuWAGnE7rCcxO64lNxpmKqjuKOMV0l9ek+5fe85eiKWzj40sWhgRnc7bsHY8sjC1sfWdj/jKMraaMzoTkyynEqruMzEzYOPeeqpf7ppI3DLzjOTtq4/t7B0RcWNkUldvZPwbg8aYLoSWYRSazSkzRxPpFFd8JEJGniwoSJbtXXUH53XEO5vZNZXHrHYKwIG0QpCGmj6DIIloPkBZQEV2NBuUrH5TCElFgbD7bjIJcvwMzl4bhCjTV7xhBCoBmSElXrVeJmGJQUhJ/geR5mZ2eRyWRUXP2iINYU9EWDBJs9Y4RPVdaIhArSZcXTFMttq2JK0BUCmdwqc6aAWyUmRLURMtRAgzkCCwWBLNMsWWUzQipZ65srQe7WTo/Wm71BnLKGmnIqK/BzSeDX8iqzG4CeTef0rJQpRa+K+n4Y5XzPnzJdHMeB67qKsJ0QagqJ0aJNpVJYXFxEsVjcsBk1ptDFtm1wzlVLL2iVyk4hsf+FiqnsFNqj1aXX9zc8Zb/c+pOmZVPm5uYUZA61ZE7LFVJAy8X/Dr4xLVfom8IYaxnLspRG6AHbsin+LvF3TP1U1ruDKqbMz88rQ9LpNBYWFirmEDRG99ezlGqWjV8dtb45nGvoV+qoI8pVuAE0mBKEcDikSy2r4NjBxoSa4gqJP6ZEekni97ImsyyxlJfqV9B0yjUGCIlSUSiBayMl3Bov4eao5sbzEm6/WkGe0RnYZB3WC2JFIPVX4sQD4EoMuDoC9A4DF6PApcESTMsXlI2CjWXT6SvAbInP3z18+Obh47SHT9M6/vLLg+NSrgicesA3FBVRIICSqBJr/E//A50IeEvRgxFJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"iphone se demo.png\"\n        title=\"iphone se demo.png\"\n        src=\"/blog/static/bd735ce4e4fe1f448d94dddaa272fa4d/fcda8/iphone-se.png\"\n        srcset=\"/blog/static/bd735ce4e4fe1f448d94dddaa272fa4d/12f09/iphone-se.png 148w,\n/blog/static/bd735ce4e4fe1f448d94dddaa272fa4d/e4a3f/iphone-se.png 295w,\n/blog/static/bd735ce4e4fe1f448d94dddaa272fa4d/fcda8/iphone-se.png 590w,\n/blog/static/bd735ce4e4fe1f448d94dddaa272fa4d/6af66/iphone-se.png 640w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></td>\n<td align=\"left\"><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/cd59bdeb84ddea0a4090c8878dff2644/302a4/note9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 205.4054054054054%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAApCAYAAAA1bQl+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADbklEQVRIx+2VS2sTURTH5zsI2qpFS1vpQnGn4ML6rIqlqAsRQRBXrrTgRkFduFFBamLVnUKtrUXqA/G18IULxX6BUkzaJrYzTZpJ5s4kmZuZSf5y7vTGqY0xaV0a+HHOnHvmn3PPfYzS2PMamy+/x6ZL77Hx4jtsufJJPDede4uVZ1+jocdn1bzfGKDhzCusO/8B20+FcPrsDTRd+AilJaSivU/DhrCG1rCG9r5ZtIU1tIQ0tIZU0HjzTRVtYd+u61XR3Kti/TzNvTNYe0tH99XPOHk6BGXz/TyOPOM4/oKja4SwcfS59DkOP+U49JTjwGMbJ14W0D3Csfp2DmuC9GWx4o6DrT1voHT0Z7BrIIPOQYa9gwx7Bk3sG2LiefdDhs4hE/uHGHYOMHQNmzg4bKLjAcMOyQBDR78B0tk2mIdi5mywnA3dsDCXZkjoGSTTTJBIZXx0A0ndEHY2ZSCVYUilfZJ6BoaVA+lY2TwU13FQKnow0mn8iMcwEY0gNjWJqckJRCPfxbPvRxCPTWFyIop4LCZilEc5zMgIDdJSCoUCCMd14RKeB8fxfc/zBG5gTODKmD9ecBxIHSHoBAJBOOcolUqIRqMC8ilWKVdqKJUGg1AFc3NzAlHNH/LKguRI5NTkoLRy6jJWDVFhPp8X5HI5wd+qroZCPZmZmUEymRSWoJistF4WVPh7pfVA7y1aFKpsOZQFZWW1NL0aC3o4PT0tRJfaO7lLKq7yUrBtG5Zl+fuw0gmpBxKjUzQ+Pu5XKFeJoMF6p0qi9BOCsoeqqpb341IWoyxIAaoqWGW9/ctms2JBylOuxpJ6GKyQ/KCtZW8u6qGmaWIfUh+lT5aeaznXsodjY2OLz3LwbNbaT+oh6cTjcV9wuWdYIm6b5Zzdimd5OZdpxQv2X1b4z6f8XzC4/GQLwnL+C5svHKujQv+FoktHaiEUk6J1Vei5BSQyDkajLr5FXIxGfEsxz61SYaXNaXO/miejLnZcA47eAY7dBXZfB0ZGXTFGOTVvbF5wgJKDsWkX9z4V8eirh6EvHu5/LooYjfE/VUj3HiEvSv+fOPK2jaJrAyD4PH4sP58v35GWUBhjkJimiUQigVQqBcsyYRgMBrOgzSahagnhU4zyDMMQeeQHNRYJ0kdK1/VyIn1rKUaQL/NIMJgnBX8Cm3UIDgr/3MsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"note 9 demo.png\"\n        title=\"note 9 demo.png\"\n        src=\"/blog/static/cd59bdeb84ddea0a4090c8878dff2644/fcda8/note9.png\"\n        srcset=\"/blog/static/cd59bdeb84ddea0a4090c8878dff2644/12f09/note9.png 148w,\n/blog/static/cd59bdeb84ddea0a4090c8878dff2644/e4a3f/note9.png 295w,\n/blog/static/cd59bdeb84ddea0a4090c8878dff2644/fcda8/note9.png 590w,\n/blog/static/cd59bdeb84ddea0a4090c8878dff2644/efc66/note9.png 885w,\n/blog/static/cd59bdeb84ddea0a4090c8878dff2644/302a4/note9.png 1080w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></td>\n</tr>\n</tbody>\n</table>","frontmatter":{"title":"flutter IntrinsicHeight","tags":["writing","flutter","dynamic height"],"date":"May 06, 2020","description":"A brief introduction about IntrinsicHeight"}}},"pageContext":{"slug":"/flutter-intrinsicheight/","previous":{"fields":{"slug":"/flutter-setstate/"},"frontmatter":{"title":"flutter setState","tags":["writing","flutter","state"]}},"next":{"fields":{"slug":"/typescript-type-override/"},"frontmatter":{"title":"Typescript type override","tags":["writing","typescript","ts","union type"]}}}},"staticQueryHashes":["4111554205","63159454"]}