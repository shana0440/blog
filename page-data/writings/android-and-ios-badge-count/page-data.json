{"componentChunkName":"component---src-templates-blog-post-js","path":"/writings/android-and-ios-badge-count/","result":{"data":{"site":{"siteMetadata":{"title":"KWGUO Blog"}},"markdownRemark":{"id":"eb8a406c-97e0-554c-b473-2989636d2865","excerpt":"In the current project, I need to implement badge count for Android and iOS, this post will explain the difference betwwen Android and iOS badge count, to…","html":"<p>In the current project, I need to implement badge count for Android and iOS, this post will explain the difference betwwen Android and iOS badge count, to understand the limitation of the Android and iOS badge count.</p>\n<h2>iOS badge count</h2>\n<p>There is two way to change the badge count at iOS, change badge count locally or by push notification.</p>\n<h3>Change badge count locally</h3>\n<p>iOS provide <code class=\"language-text\">UIApplication.shared.applicationIconBadgeNumber</code> to allow us change the badge count directly.</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">let</span> currentBadgeCount <span class=\"token operator\">=</span> <span class=\"token class-name\">UIApplication</span><span class=\"token punctuation\">.</span>shared<span class=\"token punctuation\">.</span>applicationIconBadgeNumber\n<span class=\"token class-name\">UIApplication</span><span class=\"token punctuation\">.</span>shared<span class=\"token punctuation\">.</span>applicationIconBadgeNumber <span class=\"token operator\">=</span> currentBadge <span class=\"token operator\">+</span> <span class=\"token number\">1</span>\n<span class=\"token class-name\">UIApplication</span><span class=\"token punctuation\">.</span>shared<span class=\"token punctuation\">.</span>applicationIconBadgeNumber <span class=\"token operator\">=</span> <span class=\"token number\">0</span></code></pre></div>\n<h3>Change badge count by push notification</h3>\n<p>In APNS (Apple Push Notification Service) payload, there have a property at <code class=\"language-text\">aps</code> call <code class=\"language-text\">badge</code>, this value of the badge will override the local badge count.</p>\n<p>This is the example APNS payload</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"aps\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"alert\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Hi, badge count\"</span>\n    <span class=\"token property\">\"badge\"</span><span class=\"token operator\">:</span> <span class=\"token number\">10</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>Android badge count</h2>\n<p>Starting with API level 26, Android support notification badge, some of the launcher will make it like the iOS badge count, but it depends on launchers, so in Android we not really have a badge count, however, let’s talk about Android notification badge!</p>\n<p>Notification badge is a number that carry by each notification, when receive a notification, that notification will have a default badge number <code class=\"language-text\">1</code>, some launcher will display the sum of the notification badge number on app icon like Samsung Note 9, note it only count the notification that in notification center, so if notification is cancel, it won’t be count.</p>\n<p>We can change the badge number when we send the notification from app by using <code class=\"language-text\">setNumber</code> on notification builder, unlike iOS, this notification badge is not able set by server.</p>\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">val</span> notification <span class=\"token operator\">=</span> NotificationCompat<span class=\"token punctuation\">.</span><span class=\"token function\">Builder</span><span class=\"token punctuation\">(</span>activity<span class=\"token punctuation\">,</span> channelID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setContentTitle</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Hi\"</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">setContentText</span><span class=\"token punctuation\">(</span><span class=\"token string-literal singleline\"><span class=\"token string\">\"Notification count\"</span></span><span class=\"token punctuation\">)</span>\n  <span class=\"token function\">setSmallIcon</span><span class=\"token punctuation\">(</span>android<span class=\"token punctuation\">.</span>R<span class=\"token punctuation\">.</span>color<span class=\"token punctuation\">.</span>transparent<span class=\"token punctuation\">)</span>\n  <span class=\"token function\">setNumber</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>The best solution or practice</h2>\n<h2>The mechanism, key techniques, and source code</h2>\n<h1>Pros/Cons</h1>\n<h2>Conclusion</h2>\n<h2>References</h2>\n<ul>\n<li><a href=\"https://developer.apple.com/documentation/uikit/uiapplication/1622918-applicationiconbadgenumber\">https://developer.apple.com/documentation/uikit/uiapplication/1622918-applicationiconbadgenumber</a></li>\n<li><a href=\"https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification\">https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification</a></li>\n<li><a href=\"https://developer.android.com/training/notify-user/badges\">https://developer.android.com/training/notify-user/badges</a></li>\n</ul>","frontmatter":{"title":"Android and iOS badge count","tags":["writing","android","ios","badge count","notification"],"date":"September 26, 2021","description":"The difference between Android and iOS badge count"}}},"pageContext":{"slug":"/android-and-ios-badge-count/","previous":{"fields":{"slug":"/notification-of-ios/"},"frontmatter":{"title":"Notification of iOS","tags":["writing","iOS","Notification","APNs"]}},"next":{"fields":{"slug":"/travel-of-svelte/"},"frontmatter":{"title":"Travel of svelte","tags":["writing","svelte"]}}}},"staticQueryHashes":["4111554205","63159454"]}