{"componentChunkName":"component---src-templates-blog-post-js","path":"/writings/django-deployment/","result":{"data":{"site":{"siteMetadata":{"title":"KWGUO Blog"}},"markdownRemark":{"id":"30d758e1-e6fb-5c5c-b013-b8b55cf2f144","excerpt":"Today I’m deploy django to k8s, and it have something I will like to remember. The static file is gone when turn off DEBUG The document is describe the reason…","html":"<p>Today I’m deploy django to k8s, and it have something I will like to remember.</p>\n<ul>\n<li>The static file is gone when turn off DEBUG\n<ul>\n<li>The <a href=\"https://docs.djangoproject.com/en/3.2/howto/static-files/\">document</a> is describe the reason</li>\n<li>run <code class=\"language-text\">python manage.py collectstatic --no-input</code> to collect static files to <code class=\"language-text\">STATIC_ROOT</code></li>\n<li>remove the fucking <code class=\"language-text\">STATICFILES_DIRS</code>, if the folder that defined in <code class=\"language-text\">STATICFILES_DIRS</code> didn’t exist, the collectstatic will fail.</li>\n</ul>\n</li>\n<li>The default <code class=\"language-text\">runserver</code> should not use in production\n<ul>\n<li>I using <code class=\"language-text\">gunicorn</code> to run the django app on production</li>\n<li><code class=\"language-text\">gunicorn module:application</code>, e.g. if you have a wsgi.py under siteconfig folder, and have a <code class=\"language-text\">app</code> variable is loaded application, use <code class=\"language-text\">gunicorn siteconfig.wsgi:app</code> to run the app</li>\n</ul>\n</li>\n</ul>\n<h2>References</h2>\n<ul>\n<li><a href=\"https://docs.djangoproject.com/en/3.2/howto/static-files/\">https://docs.djangoproject.com/en/3.2/howto/static-files/</a></li>\n<li><a href=\"https://docs.djangoproject.com/en/3.2/howto/static-files/deployment/\">https://docs.djangoproject.com/en/3.2/howto/static-files/deployment/</a></li>\n<li><a href=\"https://docs.djangoproject.com/en/3.2/howto/deployment/wsgi/gunicorn/\">https://docs.djangoproject.com/en/3.2/howto/deployment/wsgi/gunicorn/</a></li>\n</ul>","frontmatter":{"title":"Django Deployment","tags":["writing","python","django"],"date":"July 20, 2021","description":"stupid me"}}},"pageContext":{"slug":"/django-deployment/","previous":{"fields":{"slug":"/apollo-optimistic-response/"},"frontmatter":{"title":"Apollo Optimistic Response","tags":["writing","graphql","apollo","react","mutation","ux"]}},"next":{"fields":{"slug":"/i-would-like-to-talk-about-testing/"},"frontmatter":{"title":"I would like to talk about testing","tags":["writing","test","code quality"]}}}},"staticQueryHashes":["4111554205","63159454"]}