{"componentChunkName":"component---src-templates-blog-post-js","path":"/writings/rfc-1738/","result":{"data":{"site":{"siteMetadata":{"title":"KWGUO Blog"}},"markdownRemark":{"id":"db765eaa-966f-5980-97d9-575562589e90","excerpt":"前言 最近在寫 react-native 的時候，發生了一個 app crash 的問題，原因出在於再接第三方的 api 的時候，對方的 url 會回傳一個空白在 url 的尾端，然後在開啟 webview 的時候 ios 就 crash 了，在 google 的時候看到 RFC 就是不允許 url…","html":"<h2>前言</h2>\n<p>最近在寫 react-native 的時候，發生了一個 app crash 的問題，原因出在於再接第三方的 api 的時候，對方的 url 會回傳一個空白在 url 的尾端，然後在開啟 webview 的時候 ios 就 crash 了，在 google 的時候看到 RFC 就是不允許 url 有空白，所以想來看一下 RFC 1738。</p>\n<h2>URL Scheme</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;scheme>:&lt;scheme-specific-part></code></pre></div>\n<p>scheme 由 <code class=\"language-text\">a-z</code>, <code class=\"language-text\">0-9</code>, <code class=\"language-text\">+</code>, <code class=\"language-text\">-</code>, <code class=\"language-text\">.</code> 組成，且解析器應該將大小寫視為等效 (<code class=\"language-text\">HTTP</code>跟<code class=\"language-text\">http</code>相等)。</p>\n<h2>URL 編碼問題</h2>\n<p>任何字元都必須要能表示成 US-ASCII ，如果不能找到對應的文字，就必須編碼成 US-ASCII ，像是 emoji 之類的，就必須被 encode</p>\n<h3>Unsafe Characters</h3>\n<p>下列字元是不安全的，基本上是因為歷史遺毒的關係，所以即使在 US-ASCII 可以看到他們，這些字元也必須被 encode</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">space, >, &lt;, \", #, %, {, }, |, \\, ^, ~, [, ], `</code></pre></div>\n<p>空白需要被 encode 根據 RFC 上寫的，因為空白可能在文字處理程式上被移除或者是加入，因此最好還是要 encode。</p>\n<blockquote>\n<p>The space character is unsafe because significant spaces may disappear and insignificant spaces may be introduced when URLs are transcribed or typeset or subjected to the treatment of word-processing programs.</p>\n</blockquote>\n<h3>Reserved Characters</h3>\n<p>下列字元因為有在 scheme 上有特殊的用意，因此也需要被 encode</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">;, /, ?, :, @, =, &amp;</code></pre></div>\n<h2>Specific Schemes</h2>\n<p>下列是一些定義好的 scheme</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">Scheme</th>\n<th align=\"left\">Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">ftp</td>\n<td align=\"left\">File Transfer protocol</td>\n</tr>\n<tr>\n<td align=\"left\">http</td>\n<td align=\"left\">Hypertext Transfer Protocol</td>\n</tr>\n<tr>\n<td align=\"left\">gopher</td>\n<td align=\"left\">The Gopher protocol</td>\n</tr>\n<tr>\n<td align=\"left\">mailto</td>\n<td align=\"left\">Electronic mail address</td>\n</tr>\n<tr>\n<td align=\"left\">news</td>\n<td align=\"left\">USENET news</td>\n</tr>\n<tr>\n<td align=\"left\">nntp</td>\n<td align=\"left\">USENET news using NNTP access</td>\n</tr>\n<tr>\n<td align=\"left\">telnet</td>\n<td align=\"left\">Reference to interactive sessions</td>\n</tr>\n<tr>\n<td align=\"left\">wais</td>\n<td align=\"left\">Wide Area Information Servers</td>\n</tr>\n<tr>\n<td align=\"left\">file</td>\n<td align=\"left\">Host-specific file names</td>\n</tr>\n<tr>\n<td align=\"left\">prospero</td>\n<td align=\"left\">Prospero Directory Service</td>\n</tr>\n</tbody>\n</table>\n<h3>Common Internet Scheme Syntax</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">//&lt;user>:&lt;password>@&lt;host>:&lt;port>/&lt;url-path></code></pre></div>\n<p>其中 <code class=\"language-text\">user:password@</code>, <code class=\"language-text\">:password</code>, <code class=\"language-text\">:port</code>, <code class=\"language-text\">/url-path</code> 是可選的，所以常見的 url 基本上只有 <code class=\"language-text\">host</code> &#x26; <code class=\"language-text\">host/url-path</code>。</p>\n<p>其中 url-path 用來指定如何找到對應的資源，要注意的是在 host &#x26; url-path 中間的 <code class=\"language-text\">/</code> 並不屬於 url-path 的一部分。</p>\n<p>下面是 postgresql 的 DSN，就完全符合上面的 syntax</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">postgres://YourUserName:YourPassword@YourHostname:5432/YourDatabaseName</code></pre></div>\n<h2>References</h2>\n<ul>\n<li><a href=\"https://tools.ietf.org/html/rfc1738\">https://tools.ietf.org/html/rfc1738</a></li>\n</ul>","frontmatter":{"title":"RFC 1738","tags":["writing","url","rfc","rfc-1738"],"date":"November 14, 2020","description":"Let's read some RFC :)"}}},"pageContext":{"slug":"/rfc-1738/","previous":{"fields":{"slug":"/react-native-aspectratio/"},"frontmatter":{"title":"react-native aspectRatio","tags":["writing","flutter","react-native"]}},"next":{"fields":{"slug":"/apollo-client-query-default-options-not-works/"},"frontmatter":{"title":"apollo-client query default options not works?","tags":["writing","graphql","apollo","react"]}}}},"staticQueryHashes":["4111554205","63159454"]}