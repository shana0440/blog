{"componentChunkName":"component---src-templates-blog-post-js","path":"/writings/match-all-items-sql/","result":{"data":{"site":{"siteMetadata":{"title":"KWGUO Blog"}},"markdownRemark":{"id":"a0494bd2-d8fb-51c0-8fc4-fc8c959be1eb","excerpt":"What is the problem I have a scenario is I have a list of user, and each user have many skills, I want to list some of the users that have the skills I requiredâ€¦","html":"<h2>What is the problem</h2>\n<p>I have a scenario is I have a list of user, and each user have many skills, I want to list some of the users that have the skills I required.</p>\n<p>For example,</p>\n<table>\n<thead>\n<tr>\n<th align=\"left\">user</th>\n<th align=\"left\">skills</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">user A</td>\n<td align=\"left\">html, js</td>\n</tr>\n<tr>\n<td align=\"left\">user B</td>\n<td align=\"left\">html, js, php</td>\n</tr>\n<tr>\n<td align=\"left\">user C</td>\n<td align=\"left\">html, php</td>\n</tr>\n</tbody>\n</table>\n<p>I want to find the user that know html &#x26; js.</p>\n<h2>How to solve it</h2>\n<p>We can use <code class=\"language-text\">WHERE IN</code> to query the user that know <code class=\"language-text\">html</code> or <code class=\"language-text\">js</code>, but how to know the user know both?</p>\n<p>By using <code class=\"language-text\">GROUP BY</code> and <code class=\"language-text\">HAVING</code> we can group by user, and we can know the count the skills, then match the count is equal 2 (html and js), the SQL will look like</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">SELECT user_id FROM user_skill\n\tWHERE skill_id IN (?, ?)\n\tGROUP BY user_id\n\tHAVING COUNT(user_id) = ?</code></pre></div>\n<p>The different between <code class=\"language-text\">HAVING</code> and <code class=\"language-text\">WHERE</code> is <code class=\"language-text\">WHERE</code> apply to each row, the <code class=\"language-text\">HAVING</code> apply to the grouped result.</p>","frontmatter":{"title":"Match all items SQL","tags":["writing","sql"],"date":"May 28, 2022","description":"here is your description"}}},"pageContext":{"slug":"/match-all-items-sql/","previous":{"fields":{"slug":"/travel-of-svelte/"},"frontmatter":{"title":"Travel of svelte","tags":["writing","svelte"]}},"next":{"fields":{"slug":"/remix---the-old-fashioned-php/"},"frontmatter":{"title":"Remix - the old fashioned PHP","tags":["writing","remix","react","ssr"]}}}},"staticQueryHashes":["4111554205","63159454"]}