{"version":3,"file":"component---src-templates-blog-post-js-3dd2aec495a253df5bc4.js","mappings":"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","sources":["webpack://blog/./src/components/post.js","webpack://blog/./src/hooks/useKeepScrollPosition.js","webpack://blog/./src/components/post_list.js","webpack://blog/./src/components/post_layout.js","webpack://blog/./src/components/tag.js","webpack://blog/./src/utils/slug.js","webpack://blog/./src/components/tags.js","webpack://blog/./src/components/post_view.js","webpack://blog/./src/pages/writings.js","webpack://blog/./src/templates/blog-post.js"],"sourcesContent":["import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { Link } from \"gatsby\"\n\nconst Post = ({ node, to }) => {\n  const title = node.frontmatter.title || node.fields.slug\n  return (\n    <Link\n      to={to}\n      className=\"rounded-md py-1 px-2 mb-1 hover:bg-gray-300 block\"\n      activeClassName=\"bg-gray-300\"\n    >\n      <article key={node.fields.slug}>\n        <header>\n          <h3>{title}</h3>\n          <small>{node.frontmatter.date}</small>\n        </header>\n      </article>\n    </Link>\n  )\n}\n\nPost.propTypes = {\n  frontmatter: PropTypes.shape({\n    title: PropTypes.string.isRequired,\n    date: PropTypes.string.isRequired,\n    description: PropTypes.string.isRequired,\n  }),\n  fields: PropTypes.shape({\n    slug: PropTypes.string.isRequired,\n  }),\n}\n\nexport default Post\n","import { useLayoutEffect, useRef } from \"react\"\nimport { useLocation } from \"@gatsbyjs/reach-router\"\n\nfunction useKeepScrollPosition(identifier) {\n  const location = useLocation()\n  const ref = useRef(null)\n\n  useLayoutEffect(() => {\n    if (ref.current) {\n      const position = window.sessionStorage.getItem(identifier)\n      ref.current.scrollTo(0, position || 0)\n    }\n  }, [location.key])\n\n  return {\n    ref,\n    onScroll() {\n      if (ref.current) {\n        window.sessionStorage.setItem(identifier, ref.current.scrollTop)\n      }\n    },\n  }\n}\n\nexport default useKeepScrollPosition\n","import React from \"react\"\nimport useKeepScrollPosition from \"../hooks/useKeepScrollPosition\"\nimport Post from \"./post\"\n\nexport default function PostList({ posts, urlPrefix, className = \"\" }) {\n  const scrollRestoration = useKeepScrollPosition(\"post-list\")\n\n  return (\n    <ul\n      className={`h-full overflow-auto w-96 px-2 py-4 border-r lg:border-r-gray-300 xl:h-screen ${className}`}\n      {...scrollRestoration}\n    >\n      {posts.map(({ node }, i) => (\n        <li key={i}>\n          <Post to={`${urlPrefix}${node.fields.slug}`} node={node} />\n        </li>\n      ))}\n    </ul>\n  )\n}\n","import React from \"react\"\nimport PostList from \"./post_list\"\n\nexport default function PostLayout({\n  posts,\n  children,\n  urlPrefix,\n  className = \"\",\n}) {\n  return (\n    <div className={`h-full flex ${className}`}>\n      <PostList\n        className={`${children ? \"hidden lg:block\" : \"flex-1 lg:flex-none\"}`}\n        posts={posts}\n        urlPrefix={urlPrefix}\n      />\n      <main className={`flex-1 ${children ? \"\" : \"hidden lg:block\"}`}>\n        {children}\n      </main>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { Link } from \"gatsby\"\nimport { toSlug } from \"../utils/slug\"\n\nconst Tag = ({ tag }) => {\n  return (\n    <span className=\"bg-gray-300 text-sm rounded-sm\">\n      <Link className=\"text-gray-600 p-1\" to={`/tags/${toSlug(tag)}`}>\n        {tag}\n      </Link>\n    </span>\n  )\n}\n\nexport default Tag\n","export function toSlug(value) {\n  return value.toLowerCase().replace(/\\s/g, \"-\")\n}\n","import React from \"react\"\nimport Tag from \"./tag\"\n\nexport default function Tags({ tags }) {\n  return (\n    <div className=\"flex gap-2\">\n      {tags.map((it, i) => (\n        <Tag key={i} tag={it} />\n      ))}\n    </div>\n  )\n}\n","import { Link } from \"gatsby\"\nimport React from \"react\"\nimport Tags from \"./tags\"\n\nexport default function PostView({ post, previous, next, urlPrefix }) {\n  return (\n    <div className=\"lg:h-full xl:h-screen overflow-auto\">\n      {/* 65ch is follow the prose max width settings */}\n      <div className=\"py-24 px-5 max-w-[65ch] mx-auto\">\n        <article>\n          <header className=\"mb-10\">\n            <h1 className=\"font-bold text-3xl mb-3\">\n              {post.frontmatter.title}\n            </h1>\n            <p>{post.frontmatter.date}</p>\n            {post.frontmatter.tags && <Tags tags={post.frontmatter.tags} />}\n          </header>\n          <section\n            className=\"prose prose-h1:text-2xl prose-h2:text-xl prose-h3:text-lg prose-h4:text-base\"\n            dangerouslySetInnerHTML={{ __html: post.html }}\n          />\n        </article>\n        <hr className=\"my-5\" />\n        <nav>\n          <ul className=\"flex flex-wrap justify-between list-none p-0\">\n            <li>\n              {previous && (\n                <Link to={`${urlPrefix}${previous.fields.slug}`} rel=\"prev\">\n                  ← {previous.frontmatter.title}\n                </Link>\n              )}\n            </li>\n            <li>\n              {next && (\n                <Link to={`${urlPrefix}${next.fields.slug}`} rel=\"next\">\n                  {next.frontmatter.title} →\n                </Link>\n              )}\n            </li>\n          </ul>\n        </nav>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { graphql, useStaticQuery } from \"gatsby\"\n\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport PostLayout from \"../components/post_layout\"\n\nconst WritingsIndex = ({ children }) => {\n  const data = useStaticQuery(graphql`\n    query {\n      allMarkdownRemark(\n        sort: { fields: [frontmatter___date], order: DESC }\n        filter: {\n          frontmatter: { private: { ne: true }, tags: { in: [\"writing\"] } }\n        }\n      ) {\n        edges {\n          node {\n            excerpt\n            fields {\n              slug\n            }\n            frontmatter {\n              date(formatString: \"MMMM DD, YYYY\")\n              title\n              description\n            }\n          }\n        }\n      }\n    }\n  `)\n  const posts = data.allMarkdownRemark.edges\n\n  return (\n    <Layout>\n      <SEO title=\"My writings\" />\n      <PostLayout posts={posts} urlPrefix=\"/writings\">\n        {children}\n      </PostLayout>\n    </Layout>\n  )\n}\n\nexport default WritingsIndex\n","import React from \"react\"\nimport { graphql } from \"gatsby\"\n\nimport Seo from \"../components/seo\"\nimport WritingsIndex from \"../pages/writings\"\nimport PostView from \"../components/post_view\"\n\nconst BlogPostTemplate = ({ data, pageContext }) => {\n  const post = data.markdownRemark\n  const { previous, next } = pageContext\n\n  return (\n    <WritingsIndex>\n      <Seo\n        title={post.frontmatter.title}\n        tags={post.frontmatter.tags}\n        description={post.frontmatter.description || post.excerpt}\n      />\n      <PostView\n        post={post}\n        next={next}\n        previous={previous}\n        urlPrefix=\"/writings\"\n      />\n    </WritingsIndex>\n  )\n}\n\nexport default BlogPostTemplate\n\nexport const pageQuery = graphql`\n  query BlogPostBySlug($slug: String!) {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    markdownRemark(fields: { slug: { eq: $slug } }) {\n      id\n      excerpt(pruneLength: 160)\n      html\n      frontmatter {\n        title\n        tags\n        date(formatString: \"MMMM DD, YYYY\")\n        description\n      }\n    }\n  }\n`\n"],"names":["node","to","title","frontmatter","fields","slug","Link","className","activeClassName","key","date","identifier","location","useLocation","ref","useRef","useLayoutEffect","current","position","window","sessionStorage","getItem","scrollTo","onScroll","setItem","scrollTop","PostList","posts","urlPrefix","scrollRestoration","useKeepScrollPosition","map","i","PostLayout","children","value","tag","toLowerCase","replace","Tags","tags","it","PostView","post","previous","next","dangerouslySetInnerHTML","__html","html","rel","useStaticQuery","allMarkdownRemark","edges","data","pageContext","markdownRemark","description","excerpt"],"sourceRoot":""}